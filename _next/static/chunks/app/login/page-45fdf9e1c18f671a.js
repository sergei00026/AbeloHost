(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9232:function(e,t,n){Promise.resolve().then(n.bind(n,6776))},4421:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(7437),s=n(9693),o=n.n(s);function u(){return(0,r.jsx)("div",{className:o().loader,children:"Loading..."})}},6776:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n(7437),s=n(2265),o=n(5475),u=n(6277),a=n(6324),i=n(4421),l=n(5525),c=n.n(l);function d(){let[e,t]=(0,s.useState)(""),[n,l]=(0,s.useState)(""),[d,g]=(0,s.useState)(""),[f,m]=(0,s.useState)(!1),h=(0,a.L)(e=>e.setUser),p=(0,o.useRouter)(),_=async t=>{if(t.preventDefault(),g(""),e.length<3||n.length<3){g("Минимум 3 символа в каждом поле");return}m(!0);try{let{accessToken:t,refreshToken:r,id:s,firstName:o,lastName:a,email:i,username:l}=(await u.Z.post("/auth/login",{username:e,password:n})).data;h({id:s,firstName:o,lastName:a,email:i,username:l,accessToken:t,refreshToken:r}),p.push("/")}catch(e){g("Неверный логин или пароль")}finally{m(!1)}};return(0,r.jsx)("div",{className:c().loginContainer,children:(0,r.jsxs)("form",{className:c().form,onSubmit:_,children:[(0,r.jsx)("h2",{children:"Login"}),(0,r.jsx)("input",{type:"text",placeholder:"Username",value:e,minLength:3,onChange:e=>t(e.target.value),required:!0}),(0,r.jsx)("input",{type:"password",placeholder:"Password",value:n,minLength:3,onChange:e=>l(e.target.value),required:!0}),(0,r.jsx)("button",{type:"submit",disabled:f,children:f?(0,r.jsx)(i.Z,{}):"Login"}),d&&(0,r.jsx)("div",{className:c().error,children:d})]})})}},6324:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});let r=(0,n(3011).U)(e=>({user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,setUser:t=>{e({user:t}),localStorage.setItem("user",JSON.stringify(t))},logout:()=>{e({user:null}),localStorage.removeItem("user")},updateTokens:(t,n)=>e(e=>e.user?(()=>{let r={...e.user,accessToken:t,refreshToken:n};return localStorage.setItem("user",JSON.stringify(r)),{user:r}})():{})}))},6277:function(e,t,n){"use strict";let r=n(3464).Z.create({baseURL:"https://dummyjson.com"});t.Z=r},9693:function(e){e.exports={loader:"Loader_loader__tnucl"}},5525:function(e){e.exports={loginContainer:"Login_loginContainer__Z6LLs",form:"Login_form__6Q0fK",error:"Login_error__7pOy6"}}},function(e){e.O(0,[80,538,971,117,744],function(){return e(e.s=9232)}),_N_E=e.O()}]);