(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9232:function(e,t,n){Promise.resolve().then(n.bind(n,6374))},4421:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7437),s=n(9693),o=n.n(s);function a(){return(0,r.jsx)("div",{className:o().loader,children:"Loading..."})}},6374:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(7437),s=n(2265),o=n(6277),a=n(6324),u=n(4421),i=n(5525),l=n.n(i);function c(){let[e,t]=(0,s.useState)(""),[n,i]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[f,g]=(0,s.useState)(!1),m=(0,a.L)(e=>e.setUser),h=async t=>{if(t.preventDefault(),d(""),e.length<3||n.length<3){d("Минимум 3 символа в каждом поле");return}g(!0);try{let{accessToken:t,refreshToken:r,id:s,firstName:a,lastName:u,email:i,username:l}=(await o.Z.post("/auth/login",{username:e,password:n})).data;m({id:s,firstName:a,lastName:u,email:i,username:l,accessToken:t,refreshToken:r}),window.location.href="/AbeloHost/"}catch(e){d("Неверный логин или пароль")}finally{g(!1)}};return(0,r.jsx)("div",{className:l().loginContainer,children:(0,r.jsxs)("form",{className:l().form,onSubmit:h,children:[(0,r.jsx)("h2",{children:"Login"}),(0,r.jsx)("input",{type:"text",placeholder:"Username",value:e,minLength:3,onChange:e=>t(e.target.value),required:!0}),(0,r.jsx)("input",{type:"password",placeholder:"Password",value:n,minLength:3,onChange:e=>i(e.target.value),required:!0}),(0,r.jsx)("button",{type:"submit",disabled:f,children:f?(0,r.jsx)(u.Z,{}):"Login"}),c&&(0,r.jsx)("div",{className:l().error,children:c})]})})}},6324:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});let r=(0,n(3011).U)(e=>({user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null,setUser:t=>{e({user:t}),localStorage.setItem("user",JSON.stringify(t))},logout:()=>{e({user:null}),localStorage.removeItem("user")},updateTokens:(t,n)=>e(e=>e.user?(()=>{let r={...e.user,accessToken:t,refreshToken:n};return localStorage.setItem("user",JSON.stringify(r)),{user:r}})():{})}))},6277:function(e,t,n){"use strict";let r=n(3464).Z.create({baseURL:"https://dummyjson.com"});t.Z=r},9693:function(e){e.exports={loader:"Loader_loader__tnucl"}},5525:function(e){e.exports={loginContainer:"Login_loginContainer__Z6LLs",form:"Login_form__6Q0fK",error:"Login_error__7pOy6"}}},function(e){e.O(0,[80,538,971,117,744],function(){return e(e.s=9232)}),_N_E=e.O()}]);